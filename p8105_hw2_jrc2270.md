Homework 2
================
Joshua Carpenter
2023-10-03

``` r
library(tidyverse)
library(knitr)
library(readxl)
```

## Problem 1

In this problem, we create a dataset that combines several datasets from
a FiveThirtyEight article called “Science Isn’t Broken: It’s just a hell
of a lot harder than we give it credit for.” The result is a dataset
with 823 observations containing information about the number of
national politicians in the US from each party, the closing values of
the S&P stock index, and percent unemployment in the US for each month
between January 1947 and July 2015. There are complete data for January
1950 to June 2015 except that August to December 1974 has no president
data due to a mistake in the raw data. The variable `president`
indicates whether the president was democratic (“dem”) or republican
(“gop”) during that month, `close` indicates the closing price of the
S&P stock index on one day that month, and `unemploy` gives the percent
unemployment rate.

``` r
pols <- 
  read_csv("Data/pols-month.csv") %>%
  separate(mon, c("year", "month"), sep="-", extra = "drop") %>%
  mutate(month = month.name[as.numeric(month)], 
         president = case_when(prez_dem == 1 ~ "dem", 
                               prez_gop == 1 ~ "gop")) %>%
  select(-starts_with("prez"))

snp <-
  read_csv("Data/snp.csv") %>%
  separate(date, c("month", NA, "year"), sep="/") %>%
  mutate(year = paste(ifelse(year < 23, "20", "19"), year, sep = ""), 
         month = month.name[as.numeric(month)]) %>%
  select(year, month, close)

unemploy <-
  read_csv("Data/unemployment.csv") %>%
  pivot_longer(Jan:Dec, 
               names_to = "month", 
               values_to = "unemploy",
               values_drop_na = TRUE) %>%
  transmute(year = as.character(Year), 
            month = month.name[match(month, month.abb)], 
            unemploy)

five38 <-
  list(pols, snp, unemploy) %>%
  reduce(full_join, by = join_by(year, month))
```

Here are the rows the resulting dataset corresponding to the year 1950:

| year | month     | gov_gop | sen_gop | rep_gop | gov_dem | sen_dem | rep_dem | president | close | unemploy |
|:-----|:----------|--------:|--------:|--------:|--------:|--------:|--------:|:----------|------:|---------:|
| 1950 | January   |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.05 |      6.5 |
| 1950 | February  |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.22 |      6.4 |
| 1950 | March     |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.29 |      6.3 |
| 1950 | April     |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.96 |      5.8 |
| 1950 | May       |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 18.78 |      5.5 |
| 1950 | June      |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.69 |      5.4 |
| 1950 | July      |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 17.84 |      5.0 |
| 1950 | August    |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 18.42 |      4.5 |
| 1950 | September |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 19.45 |      4.4 |
| 1950 | October   |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 19.53 |      4.2 |
| 1950 | November  |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 19.51 |      4.2 |
| 1950 | December  |      18 |      44 |     177 |      29 |      57 |     269 | dem       | 20.43 |      4.3 |

## Problem 2

``` r
trash_wheel <-
  read_excel("Data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel", 
             skip = 2,
             col_names = c("dumpster", "month", "year", "date", "weight", 
                           "volume", "bottles_plastic", "polystyrene", 
                           "cigarettes", "bottles_glass", "bags", "wrappers", 
                           "balls", "homes", "drop1", "drop2")) %>%
  select(-starts_with("drop")) %>%
  filter(!is.na(dumpster)) %>%
  mutate(homes_calc = weight * 500 / 30)
trash_wheel
```

    ## # A tibble: 584 × 15
    ##    dumpster month year  date                weight volume bottles_plastic
    ##       <dbl> <chr> <chr> <dttm>               <dbl>  <dbl>           <dbl>
    ##  1        1 May   2014  2014-05-16 00:00:00   4.31     18            1450
    ##  2        2 May   2014  2014-05-16 00:00:00   2.74     13            1120
    ##  3        3 May   2014  2014-05-16 00:00:00   3.45     15            2450
    ##  4        4 May   2014  2014-05-17 00:00:00   3.1      15            2380
    ##  5        5 May   2014  2014-05-17 00:00:00   4.06     18             980
    ##  6        6 May   2014  2014-05-20 00:00:00   2.71     13            1430
    ##  7        7 May   2014  2014-05-21 00:00:00   1.91      8             910
    ##  8        8 May   2014  2014-05-28 00:00:00   3.7      16            3580
    ##  9        9 June  2014  2014-06-05 00:00:00   2.52     14            2400
    ## 10       10 June  2014  2014-06-11 00:00:00   3.76     18            1340
    ## # ℹ 574 more rows
    ## # ℹ 8 more variables: polystyrene <dbl>, cigarettes <dbl>, bottles_glass <dbl>,
    ## #   bags <dbl>, wrappers <dbl>, balls <dbl>, homes <dbl>, homes_calc <dbl>
